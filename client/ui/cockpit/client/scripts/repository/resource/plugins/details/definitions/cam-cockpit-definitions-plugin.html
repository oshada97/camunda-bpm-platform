<div cam-widget-loader
     loading-state="{{ loadingState }}"
     text-empty="No definitions matched by current deployment resource."
     text-error="{{ textError }}">
  <table class="definitions cam-table">
    <thead>
      <tr>
        <th class="name">Name</th>
        <th class="key">Key</th>
        <th ng-if="!isDmnResource(resource)"
            class="instance-count">Instance Count</th>
      </tr>
    </thead>
    <tbody>
      <tr ng-repeat="definition in definitions">
        <td class="name">
          <a ng-if="!isCmmnResource(resource) || hasCasePlugin"
             ng-href="{{ getDefinitionLink(definition, resource) }}">
            {{ definition.name || definition.key || definition.id }}
          </a>
          <span ng-if="isCmmnResource(resource) && !hasCasePlugin">
            {{ definition.name || definition.key || definition.id }}
          </span>
        </td>

        <td class="key">
          {{ definition.key }}
        </td>

        <td ng-if="!isDmnResource(resource)"
            class="instance-count">
          <span ng-if="!definition.instances.$loaded">
            <span class="glyphicon glyphicon-refresh animate-spin"></span>&nbsp;Loadingâ€¦
          </span>
          <span ng-if="definition.instances.$loaded">
            {{ definition.instances.count }}
          </span>
          <span ng-if="definition.instances.$error">
            Could not load instances count.
          </span>
        </td>

      </tr>
    </tbody>
  </table>

</div>
