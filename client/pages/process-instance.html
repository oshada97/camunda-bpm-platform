<div class="ctn-content-container ctn-collapsable-parent">

  <!-- toolbar -->
  <div class="ctn-toolbar">
    <a class="btn btn-toolbar" href ng-click="openCancelProcessInstanceDialog()"
       help
       help-text="Cancel running process instance"
       help-placement="'left'">
      
      <i class="icon-remove-circle"></i>
    </a>

    <a class="btn btn-toolbar" href ng-click="openJobRetriesDialog()"
       help
       help-text="Increment Number of Retries of Failed Jobs"
       help-placement="'left'">
      <i class="icon-repeat"></i>
    </a>

    <a class="btn btn-toolbar" href ng-click="openAddVariableDialog()"
       help
       help-text="Add a new variable to Process Instance"
       help-placement="'left'">
      <i class="icon-plus"></i>
    </a>
  </div>

  <!-- sitebar -->
  <div class="ctn-column ctn-sitebar ctn-collapsable ctn-scroll" collapsable="left">

    <div class="page-header">
      <small>Process Instance</small>
      <h1>{{ processDefinition.name || processDefinition.key }}</h1>
      <p>
        <strong>{{ processInstance.id }}</strong>
      </p>
    </div>

    <div class="filters" ng-controller="ProcessInstanceFilterController">
      <h5>
        Filter
      </h5>

      <i ng-if="!filterData.activityCount && !filterData.activityInstanceCount">
        No view elements selected.
      </i>

      <ul class="unstyled">

        <li class="filter" ng-if="filterData.activityInstanceCount">
          <div class="name">
            Activity Instances
          </div>

          <div class="search search-text">
            <button class="btn btn-link btn-mini btn-control remove"
                    ng-click="clearSelection()">
              <i class="icon-remove"></i>
            </button>
            {{ filterData.activityInstanceCount }} elements selected
          </div>
        </li>
      </ul>

      <ul class="unstyled">

        <li class="filter" ng-if="filterData.activityCount">
          <div class="name">
            Activities
          </div>

          <div class="search search-text">
            <button class="btn btn-link btn-mini btn-control remove"
                    ng-click="clearSelection()">
              <i class="icon-remove"></i>
            </button>
            {{ filterData.activityCount }} elements selected
          </div>
        </li>
      </ul>

    </div>    

    <div class="instance-tree">
      <h5>
        Activity Instance Tree

        <button class="btn btn-small btn-link btn-control btn-control-link"
                help help-text="The tree of active activity instances corresponding to the process diagram">
          <i class="icon-question-sign"></i>
        </button>
      </h5>

      <div activity-instance-tree="activityInstanceTree" 
           selection="filter"
           on-element-click="handleActivityInstanceSelection(id, activityId, $event)">
      </div>
    </div>

    <a class="hide-collapsable pull-right"></a>
  </div>

  <div class="ctn-column ctn-content ctn-collapsable-parent">

    <!-- content top pane -->
    <div class="ctn-row ctn-content-top">
      <div process-diagram="processDiagram" process-diagram-overlay="processDiagramOverlay" on-element-click="handleBpmnElementSelection(id, $event)" selection="filter"></div>
    </div>

    <!-- content bottom pane -->
    <div class="ctn-row ctn-content-bottom ctn-tabbed ctn-collapsable" collapse="bottom">
      <div ng-show="processInstanceTabs.length">
        <ul class="nav nav-tabs">
          <li ng-class="{ active: selectedView == viewProvider }" ng-repeat="viewProvider in processInstanceTabs">
            <a href ng-click="selectView(viewProvider)">{{ viewProvider.label }}</a>
          </li>
        </ul>
  
        <div class="ctn-tabbed-content ctn-scroll">
          <view provider="selectedView" vars="processInstanceVars" />
        </div>
      </div>
    </div>
    
    <a class="show-collapsable"></a>
  </div>
</div>
