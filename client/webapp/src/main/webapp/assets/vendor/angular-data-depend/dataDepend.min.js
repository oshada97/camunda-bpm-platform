!function(a){function b(a){function b(a){return d(a)?a:[a]}var c=a.module("dataDepend",[]),d=a.isArray,e=a.isFunction,f=(a.isObject,a.forEach);a.extend;var g=["$rootScope","$q",function(a,b){function c(a){function c(c){function d(a){z.value=a,z.$loaded=!0,w=!1,h(function(a){a.parentChanged()})}function e(){z.$loaded=!1,x=!1}function g(a){var b=q[a];if(!b)throw new Error("[dataDepend] No provider for "+a);return b}function h(a){f(v,a)}function i(a){f(r,a)}function j(){var a=[];return i(function(b){var c=g(b),d=c.resolve().then(function(a){var c=u[b];return c!=a&&(u[b]=a,w=!0),a});a.push(d)}),a}function k(a){e();var c=b.all(j()).then(function(b){var c=m();return s&&(w||a||0==b.length)&&(c=s.apply(s,b)),c}).then(function(a){return y===c&&(y=null),d(a),a});return c}function l(){y||(x=!0,t&&a(function(){n()}),h(function(a){a.parentChanged()}))}function m(){return z.value}function n(a){var c=(a||{}).reload;return(x||c)&&(y=k(c)),y?y:b.when(m())}function o(a){if(s)throw new Error("[dataDepend] Cannot set value, was using factory");d(a)}c=c||{};var p=c.name,q=c.registry,r=c.dependencies||[],s=c.factory,t=c.eager||!1,u={},v=[],w=!0,x=!0,y=null,z={$loaded:!1},A={name:p,data:z,get:m,set:o,resolve:n,children:v,parentChanged:l};return i(function(a){g(a).children.push(A)}),t&&a(function(){n()}),s||d(c.value),A}return{create:c}}return c(function(b){a.$evalAsync(b)})}],h=["$rootScope","$injector","dataProviderFactory",function(a,c,f){function g(a){function c(){function c(c,f){var h="provider$"+j++;if(f?c=b(c):(f=c,c=a(f),d(f)&&(f=f[f.length-1])),!e(f))throw new Error('[dataDepend] Must provide callback as second parameter or use [ "A", "B", function(a, b) { } ] notation');var i=g({name:h,factory:f,dependencies:c,eager:!0,registry:k});return i.data}function g(a){var b,c=a.name;if(!c)throw new Error("[dataDepend] Must provide name when creating new provider");return b=f.create(a),k[c]=b,b}function h(b,c){var f,h,i=k[b];if(i)return i.set(c),void 0;(e(c)||d(c))&&(f=c,h=a(f),c=void 0,d(f)&&(f=f[f.length-1]));var i=g({name:b,factory:f,value:c,dependencies:h,registry:k});return i.data}function i(a){var b=k[a];if(!b)throw new Error('[dataDepend] Provider "'+a+'" does not exists');b.resolve({reload:!0})}var j=0,k={};return{$providers:k,get:c,set:h,changed:i}}return{create:c}}return g(c.annotate,function(b){a.$evalAsync(b)})}];return c.factory("dataDependFactory",h),c.factory("dataProviderFactory",g),c}if("function"==typeof define&&define.amd)define(["angular"],function(a){return b(a)});else{if(void 0===typeof a)throw new Error("Cannot bind dataDepend: AngularJS not available on window or via AMD");b(a)}}(angular);